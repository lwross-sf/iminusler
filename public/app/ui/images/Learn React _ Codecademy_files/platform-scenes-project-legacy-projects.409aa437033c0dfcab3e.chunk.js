(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[48],{yZ2X:function(t,e,r){"use strict";r.r(e);var o=r("rePB"),s=r("7tbW"),n=r.n(s),i=(r("f0Jk"),r("+gav"),r("BzM2")),a=r("fhzG"),c=r.n(a),p=r("q1tI"),l=r.n(p),u=r("/MKj"),h=r("svkj"),d=r("eikI"),m=r("+gt8"),j=r("GDib"),g=r("21f3"),b=r("zqu8"),P=r("/qsH"),f=r("fjk1"),S=r("Fd/6"),k=r("XUH+"),y=r("Z6NK"),w=r("bf6c"),O=r("SdBd"),_=r("2oex"),D=r("CWAm"),v=r("ydTQ"),A=r("yy36");function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const I={showModal:r("givd").c,trackSubmit:D.h,trackComplete:D.b},T=c()({displayName:"Projects",mixins:y.a.concat([i.a.connect(v.a)]),getInitialState(){const t={type:"Brief",project:this.props.currentProject},e=_objectSpread(_objectSpread({},this.props.currentProject.projectInformation.components),{},{Brief:t});return this.componentGrid=l.a.createRef(),{wall:null,components:e,progress:this.props.currentProjectProgress}},UNSAFE_componentWillMount(){v.a.setController(this),v.a.setReduxReference(this.props.store),this.adapter=S.a.forProjectsWithComponents(this.state.components),this.adapter.controller=this,m.a.newAdapter(this.adapter)},componentDidMount(){this.updateWorkspace(),this.adapter.trigger("interface:ready"),this.adapter.extendCache()},componentDidUpdate(t,e){!e.workspaceIdle&&this.state.workspaceIdle&&this.props.showModal({type:"IdleWall"})},currentWorkspace(){return this.props.currentProject.projectInformation.workspace},gridSetup(t){0===this.state.progress.status&&void 0!==t.slots[25]&&t.expandSlotInDirection(25,"left")},updateWorkspace(){const t=this.props,e=t.disabled,r=t.isAnonymous;e||r||Object(w.a)({content:this.props.currentProject.projectInformation,isAnonymous:this.props.isAnonymous,userId:d.a.id()}).then((()=>{this.adapter.trigger("godex:ready")})).catch((t=>{0}))},componentsToHide(){return Object.keys(this.state.components).filter((t=>"Brief"!==t&&"WebBrowser"!==t))},revealComponents(){for(const t of this.componentsToHide())this.componentGrid.current.expandSlotByName(t);this.setState({grid:this.state.grid})},wall(){return this.props.isAnonymous?null:this.state.wall||null},initialSavepointSlug(){return"".concat(this.props.currentProject.slug,"-initial")},finalSavepointSlug(){return"".concat(this.props.currentProject.slug,"-final")},getWorkspaceSetupCommand:()=>null,clearWall(){this.setState({wall:null})},getAssessments(){const t=this.props,e=t.currentProjectProgress;return t.currentProject.projectInformation.self_assessments.map((t=>_objectSpread(_objectSpread({},t),{},{tasks:t.tasks.map((t=>{var r;return _objectSpread(_objectSpread({},t),{},{done:null==e||null===(r=e.checklist)||void 0===r?void 0:r[t.task_key]})}))})))},getTaskStatuses:t=>t.map((({tasks:t})=>t)).reduce(((t,e)=>[...t,...e]),[]).map((t=>!!t.done)),getWalkthroughYouTubeId(){const t=this.props.currentProject.projectInformation;return t?t.video_url:null},render(){const t=this.props,e=t.course,r=t.isPractice,o=t.programSlug||(e?e.slug:""),s={componentShouldBeDisabled:this.componentShouldBeDisabled,positionCueSignal:this.positionCueSignal},i=this.getAssessments(),a={readonly:!1,fileNavReady:!0,isProject:!0,disableLinting:this.props.isLintingDisabled,assessments:i},c={progress:this.props.currentProjectProgress,wall:this.wall(),contentItemTitle:this.props.currentProject.title,contentParentTitle:e?e.title:"",bugReportData:{course:o,skill:this.props.currentProject.slug}},p=n()([this.props.contentTitle,this.props.currentProject.title]).join(": ");return l.a.createElement(b.a,null,l.a.createElement(k.a,{customHeader:l.a.createElement(g.a,{workspace:this.currentWorkspace(),prerender:this.props.prerender,nolock:this.state.nolock,uploadSavepoints:this.state.uploadSavepoints,authoringMode:this.state.authoringMode,walkthroughVideoUrl:this.getWalkthroughYouTubeId(),contentType:"project"}),customFooter:l.a.createElement(h.a,{flagName:"le_ui_upgrades_2020"},(t=>t?l.a.createElement(P.a,{tasksDoneStatuses:this.getTaskStatuses(i),onProjectComplete:this.props.onProjectComplete,isPractice:r,nolock:this.state.nolock}):l.a.createElement(f.a,{disabled:this.componentShouldBeDisabled("Footer"),exitPaths:this.props.exitPaths,parentTitle:e?e.title:"",projectSlug:this.props.currentProject.slug,projectTitle:this.props.currentProject.title,walkthroughVideoUrl:this.getWalkthroughYouTubeId(),tasksDoneStatuses:this.getTaskStatuses(i),onProjectComplete:this.props.onProjectComplete,project:this.props.currentProject,isPractice:r,nolock:this.state.nolock})))},l.a.createElement(j.a,{ref:this.componentGrid,components:this.state.components,adapter:this.adapter,helpers:s,modifiers:a,presenter:c,gridSetup:this.gridSetup,user:{isAnon:!1},contentItemType:"project",title:p})))}});e.default=Object(u.connect)((t=>({isAdmin:Object(A.p)(t),isAnonymous:Object(A.q)(t),isPractice:Object(O.a)(t),contentTitle:Object(_.j)(t)})),I)(T)}}]);
//# sourceMappingURL=platform-scenes-project-legacy-projects.409aa437033c0dfcab3e.chunk.js.map